# Задание D8.7

   Проект таск-менеджера на Django

  ТехЗадание:
1) В качестве закрепления нового модуля дополните сигналами проект таск-менеджера на Django и подключите страницу с кэшированием. Также в коде есть ошибка, которую надо поправить. Например, когда была одна задача с единственной категорией и у задачи переключили категорию, счётчик в соответствующей категории останется равен 1.
2) Везде, где есть счётчики задач в категориях, замените их на значения в объекте вместо прямых подсчётов.
3) Сделайте новый счётчик задач по приоритетам:
  - Каждый раз, когда создаётся задача по сигналу post_save, вы обновляете счётчик приоритетов. Всего у вас будет столько же объектов, сколько приоритетов в базе.
  - Счётчики приоритетов можно просто привязать к классу TodoItem и обрабатывать без дополнительных many2many связей.
  - Выводите счётчики на основной странице index, где мы выводили счётчики задач с категориями.
4) Запустите ваш проект на Heroku. Не забудьте подключить кэширование, как мы это делали в модуле.
5) Создайте пользователя-администратора в проекте с логином pws_admin и паролем sf_password.
6) Добавьте view с кэшированием — это страница, на которой будет только текущее число и дата (datetime.now). Страница (и дата на ней) должна кэшироваться на 5 минут. Это значит, что при первом доступе на этой странице сохраняется дата, но в ближайшие 5 минут от этого она не изменяется.
7) Ссылку на ваш код в виде проекта на github и ссылку на деплой на Heroku приложите в ответе.

Для того, чтобы запустить локальный сервер необходимо:
1) Распакуйте проект в папку и через терминал зайдите в директорию проекта
2) Создате виртуальное окружение:
   - python -m venv django
3) Активируйте виртуальное окружение:
   - django\Scripts\activate.bat
4) Установите все необходимые пакеты:
   - pip install -r requirements.txt
5) Выпонить следующие команды:
   - python manage.py makemigrations
   - python manage.py migrate
   - python manage.py loaddata data.xml
   - python manage.py runserver

Для того, чтобы сделать деплой на heroku необходимо (при Debug=False):
1) Перейти в каталог с проектом (например):
   - cd C:\my_site
2) Если используете статические файлы, то обязательно в проекте должны быть созданы две папки: static и staticfiles
3) Выполнить следующий команды:
   - git init
   - git add .
   - git commit -m "initial commit
   - heroku login
   - heroku create
   - heroku rename -a oldname newname (переименовываем приложение, если необходимо)
   - heroku addons:create heroku-postgresql --as DATABASE
   - heroku config:set SECRET_KEY=Ваш_секретный_код
   - git push heroku master
   - heroku run python manage.py makemigrations
   - heroku run python manage.py migrate
   - heroku run python manage.py loaddata data.xml
   - heroku run python manage.py createsuperuser
4) Запускаем приложение:
   - heroku open

   Данный проект находится на https://taskmanager-skillfactory.herokuapp.com/
   По умолчанию логин и пароль для пользователя-администратора в проекте:
   - Логин: pws_admin
   - Пароль: sf_password
